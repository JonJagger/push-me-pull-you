
@import "client/colors"
@import "nib/gradients"

border_radius_width    = 4px
drag_drop_border_color = Black
drag_drop_border_style = dotted
drag_drop_border_width = 4px
bullet                 = '\2022'
wip_color              = Moccasin
inter-kanban-spacing   = 2px
portal_stripe_height   = 8px
large_stripe_gap       = 50%
small_stripe_gap       = 50%

//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

.team
    font-size 0.75em
    display table
    margin 0 auto
    
    #roll
        border-radius border_radius_width
        color White            
        cursor pointer
        font-size 1.4em
        padding-left  0.5em
        padding-right 0.5em
        text-align center
      
    .dice
        display table-row
        #roll
            &.red
                background red_color
            &.blue
                background blue_color
            &.orange
                background orange_color
            &.green
                background green_color

    .center
        margin 0 auto
        padding 0
        
    .dice
    .board
        margin 0 auto
        padding 10px
                
    .one
    .not-one
        border-color  White
        border-radius border_radius_width
        border-style  solid
        border-width  drag_drop_border_width
        color White
        display inline
        font-size 1em
        padding-bottom 2px
        padding-left   4px
        padding-right  4px
        padding-top    2px

    .one:before
    .not-one:before
        content bullet

    .not-one
        background White

    .one
        &.red
            background red_color
        &.blue
            background blue_color
        &.orange
            background orange_color
        &.green
            background green_color

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    .board
        border-radius border_radius_width
        padding-left  0px
        padding-right 0px        

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    .portal 
        border-radius border_radius_width
        border-style  solid
        border-width  drag_drop_border_width
        display table-cell
        width 7em
        &[data-to-team = backlog] 
            background   backlog_color
            border-color backlog_color    
        &[data-to-team = red] 
            background   red_color
            border-color red_color            
        &[data-to-team = blue] 
            background   blue_color
            border-color blue_color
        &[data-to-team = orange]
            background   orange_color
            border-color orange_color            
        &[data-to-team = green] 
            background   green_color
            border-color green_color            
        &[data-to-team = done] 
            background   done_color
            border-color done_color            

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    .wip
        border-radius border_radius_width
        background wip_color
        display table-cell
        margin  inter-kanban-spacing
        padding inter-kanban-spacing
        & .stories-column
            vertical-align top
        
    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -        
    .kanban
        border-color  wip_color
        border-radius 8px // has to be bigger?!
        border-style  solid
        border-width  drag_drop_border_width
        margin  inter-kanban-spacing
        padding inter-kanban-spacing
        width 2em
        &.red
            background red_color
        &.blue
            background blue_color
        &.orange
            background orange_color
        &.green
            background green_color

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    .story
        border-width 0
        font-size 1.4em
        text-align center
    
    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    .one-container
        padding 2px
        
    .hole
        border-color  White
        border-radius border_radius_width
        border-style  dotted
        border-width  2px

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    .done-one
    .todo-one
        border-color  White
        border-radius border_radius_width
        border-style  solid
        border-width  2px
        color White
  
    .todo-one
        background White

    .done-one
        border-color White
        &.red
            background red_color
        &.blue
            background blue_color
        &.orange
            background orange_color
        &.green
            background green_color

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // DRAG DROP
    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // The CSS must be sufficiently specific for them to take
    // precedence over the defaults above.
    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Initial selection of draggable
    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    //
    .one:hover
    .kanban.story-is-done:hover
    .kanban.is-empty:hover
        border-color drag_drop_border_color
        border-style solid
        cursor move

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Once dragging starts
    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    //
    .ui-draggable-dragging.one    
    .ui-draggable-dragging.kanban.is-empty
    .ui-draggable-dragging.kanban.story-is-done  
        border-color drag_drop_border_color
        border-style drag_drop_border_style
        cursor crosshair

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    // Dynamically activated drop targets
    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    //
    .wip .kanban.story-is-in-progress.droppable
    .board .downstream.portal.droppable
    .board .upstream.portal.droppable    
        border-color drag_drop_border_color
        border-style drag_drop_border_style

.team
    &.red .portal
        &.upstream
            background linear-gradient(top, red_color large_stripe_gap, backlog_color small_stripe_gap)
            background-size portal_stripe_height portal_stripe_height
            border-color backlog_color        
        &.downstream
            background: linear-gradient(top, red_color large_stripe_gap, blue_color small_stripe_gap);
            background-size portal_stripe_height portal_stripe_height
            border-color blue_color
    &.blue .portal
        &.upstream
            background linear-gradient(top, blue_color large_stripe_gap, red_color small_stripe_gap)
            background-size portal_stripe_height portal_stripe_height
            border-color red_color
        &.downstream
            background linear-gradient(top, blue_color large_stripe_gap, orange_color small_stripe_gap)
            background-size portal_stripe_height portal_stripe_height
            border-color orange_color
    &.orange .portal
        &.upstream
            background linear-gradient(top, orange_color large_stripe_gap, blue_color small_stripe_gap)
            background-size portal_stripe_height portal_stripe_height
            border-color blue_color
        &.downstream
            background linear-gradient(top, orange_color large_stripe_gap, green_color small_stripe_gap)
            background-size portal_stripe_height portal_stripe_height
            border-color green_color
    &.green .portal
        &.upstream
            background linear-gradient(top, green_color large_stripe_gap, orange_color small_stripe_gap)
            background-size portal_stripe_height portal_stripe_height
            border-color orange_color
        &.downstream
            background linear-gradient(top, green_color large_stripe_gap, done_color small_stripe_gap)
            background-size portal_stripe_height portal_stripe_height
            border-color done_color


.portal
    &.upstream
        Xborder-top-right-radius 3em
        border-left-width 0px
        padding-left 0px
    &.downstream
        Xborder-top-left-radius 3em
        border-right-width 0px
        padding-right 0px
        
.team .board .wip
    Xbackground black   // these are specific enough to work
    Xborder-top-left-radius 3em
    Xborder-top-right-radius 3em

    