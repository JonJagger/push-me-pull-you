
<template name="edge">
  <!-- if this is being rendered from the dashboard "edge" will not be unique -->
  <div id="edge">
          
    <div id="dice">
      <table id="dice_container">
        <tr>
          <td><input type="button"
                     class="{{teamColor}}"
                     value="r&bull;ll"
                     id="roll"> &nbsp;&nbsp;
          </td>
          {{#each dice}}
          <td>{{> die}}</td>
          {{/each}}
        </tr>
      </table>
    </div>
  
    <div id="team" class="{{teamColor}}">
      <table id="Xteam_container">
        <tr valign="top">
          <td>{{> upstreamPortal}}</td>
          <td>      
            <div id="wip">
              <table>
                <tr>
                  <td class="quarterColumn">{{#each storiesQuarter "0"}}{{> story}}{{/each}}</td>
                  <td class="quarterColumn">{{#each storiesQuarter "1"}}{{> story}}{{/each}}</td>
                  <td class="quarterColumn">{{#each storiesQuarter "2"}}{{> story}}{{/each}}</td>
                  <td class="quarterColumn">{{#each storiesQuarter "3"}}{{> story}}{{/each}}</td>
                </tr>
              </table>
            </div>
          </td>
          <td>{{> downstreamPortal}}</td>
        </tr>
      </table>
      </div>
    </div>
    
  </div>
</template>

<template name="die">
  <div class="{{color}} die {{one}}"
       data-id="{{_id}}">
  </div>
</template>

<template name="upstreamPortal">
  <div id="upstreamPortal" class="{{teamColor}} portal"
       data-from-color="{{teamColor}}"
       data-to-color="{{toColor}}">      
  </div>
</template>

<template name="downstreamPortal">
  <div id="downstreamPortal" class="{{teamColor}} portal"
       data-from-color="{{teamColor}}"
       data-to-color="{{toColor}}">      
  </div>
</template>

<template name="story">
  <div class="{{kanbanColor}} kanban {{kanbanState}}">   
    <div class="story"
         data-ones="{{ones}}"
         data-size="{{size}}"
         data-id="{{_id}}">
      {{#each holes}}
        <div class="one_container">
          <div class='hole'>&nbsp;</div>
        </div>
      {{/each}}
      {{#each gaps }}
        <div class="one_container">      
          <div class='todo-one'>&nbsp;</div>
        </div>
      {{/each}}
      {{#each ones }}
        <div class="one_container">            
          <div class='{{this}} done-one'>&#8226;</div>
        </div>
      {{/each}}
    </div>
  </div>
</template>
