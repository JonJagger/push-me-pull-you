
<template name="edge">
  <!-- if this is being rendered from the dashboard "edge" will not be unique -->
  <div id="edge">          
    <div class="dice_container">
      <table class="dice">
        <tr>
          <td>{{> roll}}</td>
          <td>&nbsp;&nbsp;</td>          
          {{#each dice}}
          <td>{{> die}}</td>
          {{/each}}
        </tr>
      </table>
    </div>  
    <div class="team_container">
      <table class="team {{teamColor}}">
        <tr valign="top">
          <td>{{> upstreamPortal}}</td>
          <td>{{> wip}}</td>
          <td>{{> downstreamPortal}}</td>
        </tr>
      </table>
      </div>
    </div>    
  </div>
</template>

<template name="roll">
  <input type="button"
         class="{{teamColor}}"
         value="r&bull;ll"
         id="roll">
</template>

<template name="wip">
  <div class="wip">
    <table>
      <tr>
        <td class="quarterColumn">{{#each storiesQuarter "0"}}{{> story}}{{/each}}</td>
        <td class="quarterColumn">{{#each storiesQuarter "1"}}{{> story}}{{/each}}</td>
        <td class="quarterColumn">{{#each storiesQuarter "2"}}{{> story}}{{/each}}</td>
        <td class="quarterColumn">{{#each storiesQuarter "3"}}{{> story}}{{/each}}</td>
      </tr>
    </table>
  </div>
</template>

<template name="die">
  <div class="{{color}} die {{one}}"
       data-id="{{_id}}">
  </div>
</template>

<template name="upstreamPortal">
  <div class="upstream portal {{teamColor}}"
       data-from-color="{{teamColor}}"
       data-to-color="{{toColor}}">      
  </div>
</template>

<template name="downstreamPortal">
  <div class="downstream portal {{teamColor}}"
       data-from-color="{{teamColor}}"
       data-to-color="{{toColor}}">      
  </div>
</template>

<template name="story">
  <div class="{{kanbanColor}} kanban {{kanbanState}}">   
    <div class="story"
         data-ones="{{ones}}"
         data-size="{{size}}"
         data-id="{{_id}}">
      {{#each holes}}
        <div class="one_container">
          <div class='hole'>&nbsp;</div>
        </div>
      {{/each}}
      {{#each gaps}}
        <div class="one_container">      
          <div class='todo-one'>&nbsp;</div>
        </div>
      {{/each}}
      {{#each ones}}
        <div class="one_container">            
          <div class='{{this}} done-one'>&#8226;</div>
        </div>
      {{/each}}
    </div>
  </div>
</template>
