
<template name="team">
  <div class="{{color}} team">          
    <div class="dice_container">
      <table class="dice">
        <tr>
          <td>{{> roll}}</td>
          <td>&nbsp;&nbsp;</td>          
          {{#each dice}}
          <td>{{> die}}</td>
          {{/each}}
        </tr>
      </table>
    </div>  
    <div class="board_container">
      <table class="{{color}} board">
        <tr valign="top">
          <td>{{> upstreamPortal}}</td>
          <td>{{> wip}}</td>
          <td>{{> downstreamPortal}}</td>
        </tr>
      </table>
      </div>
    </div>    
  </div>
</template>

<template name="roll">
  <input type="button"
         class="{{color}}"
         value="roll"
         id="roll">
</template>

<template name="wip">
  <div class="wip">
    <table>
      <tr>
        <td class="quarter-column">{{#each storiesQuarter "0"}}{{> story}}{{/each}}</td>
        <td class="quarter-column">{{#each storiesQuarter "1"}}{{> story}}{{/each}}</td>
        <td class="quarter-column">{{#each storiesQuarter "2"}}{{> story}}{{/each}}</td>
        <td class="quarter-column">{{#each storiesQuarter "3"}}{{> story}}{{/each}}</td>
      </tr>
    </table>
  </div>
</template>

<template name="die">
  <div class="{{color}} die {{one}}"
       data-id="{{_id}}">
  </div>
</template>

<template name="upstreamPortal">
  <div class="upstream portal"
       data-to-team="{{toColor}}">      
  </div>
</template>

<template name="downstreamPortal">
  <div class="downstream portal"
       data-to-team="{{toColor}}">      
  </div>
</template>

<template name="story">
  <div class="{{kanbanColor}} kanban {{kanbanState}}">   
    <div class="story"
         data-ones="{{ones}}"
         data-size="{{size}}"
         data-id="{{_id}}">
      {{#each holes}}
        <div class="one_container">
          <div class="hole">&nbsp;</div>
        </div>
      {{/each}}
      {{#each gaps}}
        <div class="one_container">      
          <div class="todo-one">&nbsp;</div>
        </div>
      {{/each}}
      {{#each ones}}
        <div class="one_container">            
          <div class="{{this}} done-one">&#{{doneOne}};</div>
        </div>
      {{/each}}
    </div>
  </div>
</template>
